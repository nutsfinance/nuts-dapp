<mat-card class="detail-card" *ngIf="issuance">
    <div class="row">
        <div class="col-xs-12 card-title">
            <img src="../../../../assets/images/navigate_back.png" class="navigate-back" (click)="navigateBack()"> Offer Details
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 detail-value detail-label">
            USD value
        </div>
    </div>

    <div class="row detail-row">
        <div class="col-xs-3 card-label">Principal</div>

        <div class="col-xs-6">
            <div class="value-content">
                {{lendingValue}} {{lendingToken}}
            </div>
        </div>

        <div class="col-xs-3 detail-value">
            $ {{ convertedLendingValue | async }}
        </div>
    </div>

    <div class="row detail-row">
        <div class="col-xs-3 card-label">Collateral</div>

        <div class="col-xs-6">
            <div class="value-row">
                <div class="value-notation">
                    required
                </div>
                <div class="value-content">
                    {{ collateralValue | async }} {{collateralToken}}
                </div>
            </div>
            <div class="value-row">
                <div class="value-notation">
                    ratio
                </div>
                <div class="value-content">
                    {{issuance.collateralRatio / 100}} %
                </div>
            </div>
        </div>

        <div class="col-xs-3 detail-value">
            $ {{ convertedCollateralValue | async }}
        </div>
    </div>

    <div class="row detail-row">
        <div class="col-xs-3 card-label">Interest</div>

        <div class="col-xs-6">
            <div class="value-row">
                <div class="value-notation">
                    per day
                </div>
                <div class="value-content">
                    {{lendingValue * issuance.interestRate / 1000000}} {{lendingToken}}
                </div>
            </div>
            <div class="value-row">
                <div class="value-notation">
                    total
                </div>
                <div class="value-content">
                    {{lendingValue * issuance.interestRate * issuance.tenorDays / 1000000}} {{lendingToken}}
                </div>
            </div>
        </div>

        <div class="col-xs-3">
            <div class="detail-value">
                $ {{ convertedPerDayInterestValue | async }}
            </div>
            <div class="detail-value">
                $ {{ convertedTotalInterestValue | async }}
            </div>
        </div>
    </div>

    <div class="row detail-row">
        <div class="col-xs-3 card-label">Tenor</div>

        <div class="col-xs-6">
            <div class="value-content">
                {{issuance.tenorDays}} days
            </div>
        </div>

        <div class="col-xs-2"></div>
    </div>

    <div class="row detail-row" *ngIf="issuance.engagementTimestamp">
        <div class="col-xs-3 card-label">Engaged</div>

        <div class="col-xs-6">
            <div class="value-content">
                {{issuance.engagementTimestamp * 1000 | date: 'MM-dd-yyyy'}}
            </div>
        </div>

        <div class="col-xs-2"></div>
    </div>

    <div class="row detail-row">
        <div class="col-xs-3 card-label">Due Date</div>

        <div class="col-xs-6">
            <div class="value-content">
                {{ (issuance.state <= 2? issuance.engagementDueTimestamp * 1000 : issuance.issuanceDueTimestamp * 1000) | date: 'MM-dd-yyyy'}}
            </div>
        </div>

        <div class="col-xs-2"></div>
    </div>

    <div class="row">
        <div class="col-xs-12 action-row" *ngIf="issuance.state == 2 && issuance.makerAddress != nutsPlatformService.currentAccount">
            <button mat-raised-button color="primary" class="engage-button" (click)="engageIssuance()">Engage</button>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 action-row" *ngIf="issuance.state == 3 && issuance.takerAddress == nutsPlatformService.currentAccount">
            <button mat-raised-button color="primary" class="repay-button" (click)="repayIssuance()">Repay</button>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 action-row" *ngIf="issuance.state == 2 && issuance.makerAddress == nutsPlatformService.currentAccount">
            <button mat-stroked-button color="primary" class="close-button" (click)="cancelIssuance()">Close Position</button>
        </div>
    </div>
</mat-card>
